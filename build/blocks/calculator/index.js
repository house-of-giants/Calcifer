!function(){"use strict";var e,r={239:function(){function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function r(r,t){if(r){if("string"==typeof r)return e(r,t);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,l,i,a=[],c=!0,u=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=l.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,r,t){return(r=function(e){var r=function(e){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=n(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"calcifer/calculator","version":"1.0.0","title":"Calculator","category":"widgets","icon":"calculator","description":"Add a formula calculator to your page.","example":{"attributes":{"formulaId":0,"title":"Calculator","description":"Enter values below to calculate the result.","theme":"light"}},"supports":{"html":false,"align":["wide","full"]},"attributes":{"formulaId":{"type":"number","default":0},"title":{"type":"string","default":"Calculator"},"description":{"type":"string","default":""},"theme":{"type":"string","default":"light"}},"textdomain":"calcifer","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),i=window.wp.i18n,a=window.wp.blocks,c=window.wp.blockEditor,u=window.wp.components,s=window.wp.element,f=window.ReactJSXRuntime;function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}(0,a.registerBlockType)(l.name,p(p({},l),{},{edit:function(n){var o=n.attributes,l=n.setAttributes,a=(0,c.useBlockProps)(),d=o.formulaId,h=o.title,m=o.description,b=o.theme,y=t((0,s.useState)([]),2),v=y[0],w=y[1],j=t((0,s.useState)(!0),2),g=j[0],_=j[1];(0,s.useEffect)((function(){var e,r;window.calciferData&&window.calciferData.formulas?(w(window.calciferData.formulas),_(!1)):fetch("".concat((null===(e=window.calciferData)||void 0===e?void 0:e.restUrl)||"/wp-json/","calcifer/v1/formulas"),{headers:{"X-WP-Nonce":(null===(r=window.calciferData)||void 0===r?void 0:r.nonce)||"","Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.ok?e.json():(console.error("REST API Error:",e.status,e.statusText),e.json().then((function(e){throw console.error("Error details:",e),e})))})).then((function(e){w(e),_(!1)})).catch((function(e){console.error("Error fetching formulas:",e),_(!1)}))}),[]);var x,O=[{label:(0,i.__)("-- Select Formula --","calcifer"),value:0}].concat(function(r){if(Array.isArray(r))return e(r)}(x=Array.isArray(v)?v.map((function(e){return{label:e.title,value:e.id}})):[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(x)||r(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=[{label:(0,i.__)("Light","calcifer"),value:"light"},{label:(0,i.__)("Dark","calcifer"),value:"dark"}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.InspectorControls,{children:(0,f.jsxs)(u.PanelBody,{title:(0,i.__)("Calculator Settings","calcifer"),initialOpen:!0,children:[(0,f.jsx)(u.SelectControl,{label:(0,i.__)("Formula","calcifer"),value:d,options:O,onChange:function(e){return l({formulaId:parseInt(e,10)})},help:(0,i.__)("Select the formula to use for calculation.","calcifer")}),(0,f.jsx)(u.TextControl,{label:(0,i.__)("Title","calcifer"),value:h,onChange:function(e){return l({title:e})},help:(0,i.__)("Title displayed above the calculator.","calcifer")}),(0,f.jsx)(u.TextareaControl,{label:(0,i.__)("Description","calcifer"),value:m,onChange:function(e){return l({description:e})},help:(0,i.__)("Description displayed below the title.","calcifer")}),(0,f.jsx)(u.RadioControl,{label:(0,i.__)("Theme","calcifer"),selected:b,options:S,onChange:function(e){return l({theme:e})},help:(0,i.__)("Choose the visual style for the calculator.","calcifer")})]})}),(0,f.jsx)("div",p(p({},a),{},{children:g?(0,f.jsxs)(u.Placeholder,{icon:"calculator",label:(0,i.__)("Calculator","calcifer"),children:[(0,f.jsx)(u.Spinner,{}),(0,i.__)("Loading formulas...","calcifer")]}):d>0?(0,f.jsx)("div",{className:"calcifer-preview theme-".concat(b),children:(0,f.jsxs)(u.Card,{children:[(0,f.jsxs)(u.CardHeader,{children:[(0,f.jsx)("h3",{children:h||(0,i.__)("Calculator","calcifer")}),m&&(0,f.jsx)("p",{children:m})]}),(0,f.jsx)(u.CardBody,{children:Array.isArray(v)&&(0,f.jsxs)("div",{className:"calcifer-editor-preview",children:[(0,f.jsx)("p",{className:"preview-note",children:(0,i.__)("Calculator Preview - The actual calculator will appear here on the frontend.","calcifer")}),(0,f.jsx)("hr",{}),v.map((function(e){var r,t;return e.id===d?(0,f.jsxs)("div",{className:"selected-formula",children:[(0,f.jsxs)("h4",{children:[(0,i.__)("Selected Formula:","calcifer")," ",e.title]}),(0,f.jsxs)("p",{children:[(0,i.__)("Inputs:","calcifer")," ",(null===(r=e.inputs)||void 0===r?void 0:r.length)||0]}),(0,f.jsxs)("p",{children:[(0,i.__)("Output:","calcifer")," ",null===(t=e.output)||void 0===t?void 0:t.label]})]},e.id):null}))]})})]})}):(0,f.jsx)(u.Placeholder,{icon:"calculator",label:(0,i.__)("Calculator","calcifer"),instructions:(0,i.__)("Select a formula in the block settings sidebar.","calcifer"),children:(0,f.jsx)(u.SelectControl,{value:d,options:O,onChange:function(e){return l({formulaId:parseInt(e,10)})}})})}))]})},save:function(){return null}}))}},t={};function n(e){var o=t[e];if(void 0!==o)return o.exports;var l=t[e]={exports:{}};return r[e](l,l.exports,n),l.exports}n.m=r,e=[],n.O=function(r,t,o,l){if(!t){var i=1/0;for(s=0;s<e.length;s++){t=e[s][0],o=e[s][1],l=e[s][2];for(var a=!0,c=0;c<t.length;c++)(!1&l||i>=l)&&Object.keys(n.O).every((function(e){return n.O[e](t[c])}))?t.splice(c--,1):(a=!1,l<i&&(i=l));if(a){e.splice(s--,1);var u=o();void 0!==u&&(r=u)}}return r}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[t,o,l]},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},function(){var e={477:0,350:0};n.O.j=function(r){return 0===e[r]};var r=function(r,t){var o,l,i=t[0],a=t[1],c=t[2],u=0;if(i.some((function(r){return 0!==e[r]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var s=c(n)}for(r&&r(t);u<i.length;u++)l=i[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(s)},t=self.webpackChunkcalcifer=self.webpackChunkcalcifer||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))}();var o=n.O(void 0,[350],(function(){return n(239)}));o=n.O(o)}();